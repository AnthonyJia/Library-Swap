{% extends 'base.html' %}
{% block content %}

<h2 class="mt-4">Pending Requests</h2>
<table>
  <thead>
    <tr>
      <th>Book</th>
      <th>Owner</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for req in borrow_requests %}
      {% if req.status == 'pending' %}
        <tr>
          <td>{{ req.book.title }}</td>
          <td>{{ req.book.user.username }}</td>
          <td>{{ req.start_date }}</td>
          <td>{{ req.end_date }}</td>
          <td>{{ req.get_status_display }}</td>
        </tr>
      {% endif %}
    {% endfor %}
  </tbody>
</table>

<h2 class="mt-5">Approved Requests</h2>
<table>
  <thead>
    <tr>
      <th>Book</th>
      <th>Owner</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for req in borrow_requests %}
      {% if req.status == 'approved' %}
        <tr>
          <td>{{ req.book.title }}</td>
          <td>{{ req.book.user.username }}</td>
          <td>{{ req.start_date }}</td>
          <td>{{ req.end_date }}</td>
          <td>{{ req.get_status_display }}</td>
        </tr>
      {% endif %}
    {% endfor %}
  </tbody>
</table>

<h2 class="mt-5">Declined Requests</h2>
<table>
  <thead>
    <tr>
      <th>Book</th>
      <th>Owner</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for req in borrow_requests %}
      {% if req.status == 'rejected' %}
        <tr>
          <td>{{ req.book.title }}</td>
          <td>{{ req.book.user.username }}</td>
          <td>{{ req.start_date }}</td>
          <td>{{ req.end_date }}</td>
          <td>{{ req.get_status_display }}</td>
        </tr>
      {% endif %}
    {% endfor %}
  </tbody>
</table>
<a href="{% url 'choose' %}" class="btn btn-secondary mt-3 mb-5">Back</a>
{% endblock %}
